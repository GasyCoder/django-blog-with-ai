{% extends "blog/base.html" %}

{% block title %}Blog{% endblock %}

{% block content %}
  {% if filter_title %}<h2>{{ filter_title }}</h2>{% endif %}

  {% for post in page_obj %}
    <article>
      <h2><a href="{% url 'blog:post_detail' post.slug %}">{{ post.title }}</a></h2>

      {% if post.featured_image %}
        <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" style="max-width:320px;">
      {% endif %}

      <p>{{ post.intro|linebreaksbr }}</p>

      <p>
        Catégorie:
        <a href="{% url 'blog:posts_by_category' post.category.slug %}">{{ post.category.name }}</a>
      </p>

      <p>
        Tags:
        {% for tag in post.tags.all %}
          <a href="{% url 'blog:posts_by_tag' tag.slug %}">{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
        {% empty %}
          Aucun
        {% endfor %}
      </p>

      <hr>
    </article>
  {% empty %}
    <p>Aucun article publié.</p>
  {% endfor %}

  <nav>
    {% if page_obj.has_previous %}
      <a href="?page={{ page_obj.previous_page_number }}">Précédent</a>
    {% endif %}

    <span>Page {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>

    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}">Suivant</a>
    {% endif %}
  </nav>
{% endblock %}
